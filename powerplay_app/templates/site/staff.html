{% extends "site/base.html" %}
{% load static %}

{% block title %}Vedení | {% if primary_team %}{{ primary_team.name }} | {% endif %}PowerPlay{% endblock %}
{% block crumbs %}Domů / Vedení{% endblock %}

{% block content %}
<section class="section">
  <div class="container">
    <h1 class="section__title">Vedení</h1>

    {# DEBUG do HTML zdroje (volitelné) #}
    debug: team_id={{ primary_team.id|default:'-' }}, staff_count={{ staff|length }}

    {% if staff|length %}
      <div class="players-grid mt-4">
        {% for m in staff %}
          <a href="{% url 'site:staff_detail' m.id %}" class="player-card" aria-label="Detail: {{ m.first_name }} {{ m.last_name }}">
            <div class="player-card__media">
              <img class="player-card__photo"
                   src="{% if m.photo %}{{ m.photo.url }}{% else %}{% static 'powerplay_app/img/default_player.png' %}{% endif %}"
                   alt="{{ m.first_name }} {{ m.last_name }}"
                   loading="lazy" decoding="async" width="160" height="160" />
            </div>
            <div class="player-card__body">
              <div class="player-card__top">
                <h3 class="player-card__name">{{ m.first_name }} {{ m.last_name }}</h3>
              </div>
              <div class="player-card__meta">
                <span class="badge">{{ m.role }}</span>
                {% if m.email %}<span class="dot" aria-hidden="true"></span><span class="muted">{{ m.email }}</span>{% endif %}
              </div>
            </div>
          </a>
        {% endfor %}
      </div>
    {% else %}
      <p class="muted">Zatím bez členů vedení.</p>
    {% endif %}
  </div>
</section>
{% endblock %}
